{"version":3,"sources":["cli.js"],"names":["yata","require","nconf","log","config","module","exports","argv","env","file","getConfigPath","get","apiHost","validateConfig","downloadTranslation","locales","locale"],"mappings":";;;;;;;;;;;;;;AAAA,IAAMA,IAAI,GAAGC,OAAO,CAAC,QAAD,CAApB;;AACA,IAAMC,KAAK,GAAGD,OAAO,CAAC,OAAD,CAArB;;AACA,IAAME,GAAG,GAAGF,OAAO,CAAC,OAAD,CAAnB;;AACAA,OAAO,CAAC,QAAD,CAAP,CAAkBG,MAAlB;;AAEAC,MAAM,CAACC,OAAP,8FAAiB;AAAA;;AAAA;AAAA;AAAA;AAAA;AACf;AACAJ,UAAAA,KAAK,CAACK,IAAN,GAFe,CAIf;;AACAL,UAAAA,KAAK,CAACM,GAAN,GALe,CAOf;;AACAN,UAAAA,KAAK,CAACO,IAAN,CAAW;AAAEA,YAAAA,IAAI,EAAET,IAAI,CAACU,aAAL,CAAmBR,KAAK,CAACS,GAAN,CAAU,QAAV,CAAnB;AAAR,WAAX,EARe,CAUf;;AACAX,UAAAA,IAAI,CAACY,OAAL,GAAeV,KAAK,CAACS,GAAN,CAAU,eAAV,KAA8B,wBAA7C;AAXe;;AAAA,eAeXX,IAAI,CAACa,cAAL,CACEX,KAAK,CAACS,GAAN,CAAUT,KAAK,CAACS,GAAN,CAAU,OAAV,CAAV,CADF,EAEET,KAAK,CAACS,GAAN,CAAU,SAAV,CAFF,EAGET,KAAK,CAACS,GAAN,CAAU,SAAV,CAHF,EAIET,KAAK,CAACS,GAAN,CAAU,QAAV,CAJF,EAKET,KAAK,CAACS,GAAN,CAAU,MAAV,CALF,EAMET,KAAK,CAACS,GAAN,CAAU,YAAV,CANF,EAOET,KAAK,CAACS,GAAN,CAAU,aAAV,CAPF,CAfW;AAAA;AAAA;AAAA;;AAAA,eA0BPT,KAAK,CAACS,GAAN,CAAU,QAAV,CA1BO;AAAA;AAAA;AAAA;;AAAA;AAAA,iBA2BHX,IAAI,CAACc,mBAAL,CAAyBZ,KAAK,CAACS,GAAN,CAAU,QAAV,CAAzB,CA3BG;;AAAA;AAAA;AAAA;;AAAA;AAAA,iDA6BUX,IAAI,CAACe,OA7Bf;AAAA;;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;;AA6BAC,UAAAA,MA7BA;AAAA;AAAA,iBA8BDhB,IAAI,CAACc,mBAAL,CAAyBE,MAAzB,CA9BC;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;;AAAA;;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAmCbb,UAAAA,GAAG,CAAC,KAAD,cAAH;;AAnCa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAjB","sourcesContent":["const yata = require(\"./yata\");\nconst nconf = require(\"nconf\");\nconst log = require(\"./log\");\nrequire(\"dotenv\").config();\n\nmodule.exports = async function () {\n  // read argv for potential custom config path\n  nconf.argv();\n\n  // read ENV for token\n  nconf.env();\n\n  // load config path\n  nconf.file({ file: yata.getConfigPath(nconf.get(\"config\")) });\n\n  // setup API host\n  yata.apiHost = nconf.get(\"YATA_API_HOST\") || \"https://api.yatapp.net\";\n\n  try {\n    if (\n      yata.validateConfig(\n        nconf.get(nconf.get(\"token\")),\n        nconf.get(\"project\"),\n        nconf.get(\"locales\"),\n        nconf.get(\"format\"),\n        nconf.get(\"root\"),\n        nconf.get(\"outputPath\"),\n        nconf.get(\"strip_empty\")\n      )\n    ) {\n      // if passed locale explicit download just one\n      if (nconf.get(\"locale\")) {\n        await yata.downloadTranslation(nconf.get(\"locale\"));\n      } else {\n        for (let locale of yata.locales) {\n          await yata.downloadTranslation(locale);\n        }\n      }\n    }\n  } catch (e) {\n    log(\"red\", e);\n  }\n};\n"],"file":"cli.js"}